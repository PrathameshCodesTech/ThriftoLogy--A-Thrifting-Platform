{% load static %}
{% block navigation %}
<!-- Navigation -->
<header class="fixed top-0 left-0 w-full bg-white z-50 shadow-sm">
    <div class="max-w-7xl mx-auto px-4 py-4 flex justify-between items-center">
        <!-- Left Section -->
        <div class="flex items-center">
            <button id="mobile-menu-toggle" class="md:hidden">
                <i data-feather="menu"></i>
            </button>
            <a href="{% url 'Home' %}" class="text-2xl font-bold">
                <span class="text-black">THRIFT</span>
                <span class="text-gray-500">OLOGY</span>
            </a>
        </div>

        <!-- Middle Section - Username -->
        <div class="hidden md:block">
            {% if user.is_authenticated %}
                <span class="text-sm uppercase tracking-wider">Welcome, {{ user.username }}</span>
            {% endif %}
        </div>

        <!-- Right Section -->
        <div class="flex items-center space-x-6">
            {% if user.is_authenticated %}
                <!-- Hearts and Cart -->
                <button id="heart-button" class="hover:text-gray-600">
                    <i data-feather="shopping-bag"></i>
                </button>
                <button id="cart-button" class="relative hover:text-gray-600">
                    <i data-feather="shopping-cart"></i>
                    <span id="cart-count" 
                          class="hidden absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center">
                    </span>
                </button>

                <!-- User Dropdown -->
                <div class="relative">
                    <button id="user-menu-button" class="flex items-center hover:text-gray-600">
                        <i data-feather="user" class="h-7 w-7"></i>
                    </button>
                    
                    <!-- Dropdown Menu -->
                    <div id="user-dropdown" class="hidden absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 ring-1 ring-black ring-opacity-5">
                        <a href="{% url 'profile' %}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                            My Profile
                        </a>
                        <a href="{% url 'password_change' %}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                            Change Password
                        </a>
                        <a href="{% url 'password_reset' %}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                            Forgot Password
                        </a>
                        <form action="{% url 'logout' %}" method="POST" class="block">
                            {% csrf_token %}
                            <button type="submit" class="w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                                Logout
                            </button>
                        </form>
                    </div>
                </div>
            {% else %}
                <a href="{% url 'login' %}" class="text-sm uppercase tracking-wider hover:text-gray-600">
                    Login
                </a>
                <a href="{% url 'register' %}" class="text-sm uppercase tracking-wider hover:text-gray-600">
                    Register
                </a>
            {% endif %}
        </div>
    </div>

    <!-- Desktop Navigation -->
    <nav id="desktop-nav" class="hidden md:flex justify-center space-x-8 py-4 border-t border-b">
        <a href="{% url 'Outer-wear' %}" class="uppercase text-sm tracking-wider text-gray-600 hover:text-black">
            Outerwear
        </a>
        <a href="#" class="uppercase text-sm tracking-wider text-gray-600 hover:text-black">
            Top
        </a>
        <a href="#" class="uppercase text-sm tracking-wider text-gray-600 hover:text-black">
            Bottom
        </a>
        <a href="#" class="uppercase text-sm tracking-wider text-gray-600 hover:text-black">
            Chic Kicks
        </a>
        <a href="#" class="uppercase text-sm tracking-wider text-gray-600 hover:text-black">
            Accessories
        </a>
        <a href="#" class="uppercase text-sm tracking-wider text-gray-600 hover:text-black">
            Sell
        </a>
    </nav>

    <!-- Mobile Menu -->
    <div id="mobile-menu" class="md:hidden absolute top-full left-0 w-full bg-white shadow-lg hidden">
        <!-- Categories will be dynamically added here -->
    </div>
</header>
{% endblock %}

<style>
    #user-menu-button:focus + #user-dropdown,
    #user-dropdown:hover {
        display: block;
    }
</style>